<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dojo Survey - 3D Flip Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeOut {
        from {
          opacity: 1;
          transform: translateY(0);
        }
        to {
          opacity: 0;
          transform: translateY(-20px);
        }
      }

      .is-visible {
        display: block;
        animation: fadeIn 0.5s ease-out forwards;
      }

      .is-hidden {
        animation: fadeOut 0.5s ease-in forwards;
      }

      /* New Glassmorphism Card Style */
      .glass-card {
        background: rgba(22, 22, 29, 0.6); /* Darker, less transparent */
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        border-radius: 1rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
        position: relative;
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        padding: 2rem;
      }

      /* Glowing Border Effect */
      .glass-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: inherit;
        padding: 1px; /* Border thickness */
        background: radial-gradient(
          400px circle at var(--x),
          var(--y),
          rgba(168, 85, 247, 0.5),
          /* Purple-400 */ transparent 40%
        );
        -webkit-mask: linear-gradient(#fff 0 0) content-box,
          linear-gradient(#fff 0 0);
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: destination-out;
        mask-composite: exclude;
        pointer-events: none; /* Allow clicks to pass through */
      }
    </style>
  </head>
  <body
    class="bg-gray-900 flex items-center justify-center min-h-screen font-sans overflow-hidden"
  >
    <!-- Aurora Background -->
    <div
      class="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-gray-900 via-black to-gray-900"
    ></div>
    <div
      class="absolute top-1/4 left-1/4 w-96 h-96 bg-purple-700 rounded-full filter blur-3xl opacity-20 animate-pulse"
    ></div>
    <div
      class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-indigo-700 rounded-full filter blur-3xl opacity-20 animate-pulse"
      style="animation-delay: 3s"
    ></div>

    <!-- Form Container -->
    <div id="form-container" class="w-full max-w-md">
      <div class="glass-card">
        <div class="relative">
          <h1
            class="text-4xl font-bold text-center text-white drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)]"
          >
            Dojo Survey
          </h1>
          <form id="dojo-form" class="space-y-6 pt-6">
            <div class="relative">
              <input
                type="text"
                name="name"
                id="name"
                placeholder=" "
                required
                class="block w-full px-4 py-3 bg-black/40 border-2 border-white/20 rounded-lg text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition duration-300 peer"
              />
              <label
                for="name"
                class="absolute left-4 -top-3 text-sm text-gray-300 transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-3.5 peer-focus:-top-3 peer-focus:text-sm peer-focus:text-indigo-300"
                >Your Name</label
              >
            </div>
            <div class="relative">
              <select
                name="location"
                id="location"
                required
                class="block appearance-none w-full px-4 py-3 bg-black/40 border-2 border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition duration-300"
              >
                <option class="bg-gray-900" value="San Jose">San Jose</option>
                <option class="bg-gray-900" value="Seattle">Seattle</option>
                <option class="bg-gray-900" value="Dallas">Dallas</option>
                <option class="bg-gray-900" value="Chicago">Chicago</option>
              </select>
              <label
                for="location"
                class="absolute left-4 -top-3 text-sm text-gray-300"
                >Dojo Location</label
              >
            </div>
            <div class="relative">
              <select
                name="language"
                id="language"
                required
                class="block appearance-none w-full px-4 py-3 bg-black/40 border-2 border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition duration-300"
              >
                <option class="bg-gray-900" value="C++">C++</option>
                <option class="bg-gray-900" value="Python">Python</option>
                <option class="bg-gray-900" value="JavaScript">
                  JavaScript
                </option>
                <option class="bg-gray-900" value="Java">Java</option>
              </select>
              <label
                for="language"
                class="absolute left-4 -top-3 text-sm text-gray-300"
                >Favorite Language</label
              >
            </div>
            <div class="relative">
              <textarea
                name="comment"
                id="comment"
                rows="3"
                placeholder=" "
                class="block w-full px-4 py-3 bg-black/40 border-2 border-white/20 rounded-lg text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition duration-300 peer"
              ></textarea>
              <label
                for="comment"
                class="absolute left-4 -top-3 text-sm text-gray-300 transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-3.5 peer-focus:-top-3 peer-focus:text-sm peer-focus:text-indigo-300"
                >Comment (optional)</label
              >
            </div>
            <div>
              <button
                type="submit"
                class="w-full flex justify-center py-3 px-4 border-2 border-indigo-400/50 rounded-lg shadow-lg text-lg font-bold text-white bg-gradient-to-r from-indigo-500/80 to-purple-500/80 hover:from-indigo-500 hover:to-purple-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-indigo-400 transform hover:scale-105 active:scale-100 transition-all duration-300 ease-in-out"
              >
                Submit
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Results Container -->
    <div id="results-container" class="w-full max-w-md" style="display: none">
      <div class="glass-card text-white">
        <div class="relative">
          <h1
            class="text-4xl font-bold text-center text-white drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)]"
          >
            Submitted Information
          </h1>
          <div id="results-content" class="space-y-4 text-lg pt-6">
            <div class="flex justify-between border-b border-white/20 py-3">
              <span class="font-medium text-gray-300">Name:</span>
              <span
                id="result-name"
                class="font-semibold text-indigo-300"
              ></span>
            </div>
            <div class="flex justify-between border-b border-white/20 py-3">
              <span class="font-medium text-gray-300">Dojo Location:</span>
              <span
                id="result-location"
                class="font-semibold text-indigo-300"
              ></span>
            </div>
            <div class="flex justify-between border-b border-white/20 py-3">
              <span class="font-medium text-gray-300">Favorite Language:</span>
              <span
                id="result-language"
                class="font-semibold text-indigo-300"
              ></span>
            </div>
            <div class="flex justify-between py-3">
              <span class="font-medium text-gray-300">Comment:</span>
              <span
                id="result-comment"
                class="font-semibold text-indigo-300"
              ></span>
            </div>
          </div>
          <div class="pt-6">
            <button
              id="go-back"
              class="w-full text-center py-3 px-4 border-2 border-indigo-400/50 rounded-lg shadow-lg text-lg font-bold text-white bg-gradient-to-r from-purple-500/80 to-indigo-500/80 hover:from-purple-500 hover:to-indigo-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-indigo-400 transform hover:scale-105 active:scale-100 transition-all duration-300 ease-in-out"
            >
              Go Back
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      const formContainer = document.getElementById("form-container");
      const resultsContainer = document.getElementById("results-container");
      const form = document.getElementById("dojo-form");
      const goBackButton = document.getElementById("go-back");

      // Glowing Border Effect
      document.querySelectorAll(".glass-card").forEach((card) => {
        card.addEventListener("mousemove", (e) => {
          const rect = card.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          card.style.setProperty("--x", `${x}px`);
          card.style.setProperty("--y", `${y}px`);
        });
      });

      form.addEventListener("submit", function (event) {
        event.preventDefault();

        const formData = new FormData(form);

        fetch("/process", {
          method: "POST",
          body: formData,
        })
          .then((response) => response.json())
          .then((data) => {
            document.getElementById("result-name").textContent = data.name;
            document.getElementById("result-location").textContent =
              data.location;
            document.getElementById("result-language").textContent =
              data.language;
            document.getElementById("result-comment").textContent =
              data.comment;

            formContainer.classList.add("is-hidden");

            setTimeout(() => {
              formContainer.style.display = "none";
              resultsContainer.style.display = "block";
              resultsContainer.classList.add("is-visible");
              formContainer.classList.remove("is-hidden");
            }, 500);
          })
          .catch((error) => console.error("Error:", error));
      });

      goBackButton.addEventListener("click", function () {
        resultsContainer.classList.add("is-hidden");

        setTimeout(() => {
          resultsContainer.style.display = "none";
          formContainer.style.display = "block";
          formContainer.classList.add("is-visible");
          resultsContainer.classList.remove("is-hidden");

          form.reset();
        }, 500);
      });
    </script>
  </body>
</html>
